<%- include('../userlayout/header.ejs')%>

	<body>
		<div class="top-bar">
			<div class="content-topbar flex-sb-m h-full container">
				<div class="left-top-bar">
					Free shipping for standard order over $100
				</div>

				<div class="right-top-bar flex-w h-full">

					<a href="/login" class="flex-c-m trans-04 p-lr-25">
						Login
					</a>

					<a href="/profile" class="flex-c-m trans-04 p-lr-25">
						Profile
					</a>
					<a href="/orderview" class="flex-c-m trans-04 p-lr-25">
						Your Orders
					</a>
					<a href="/logout" class="flex-c-m trans-04 p-lr-25">
						LogOut
					</a>
				</div>
		</div>


		<div class="wrap-menu-desktop">
			<nav class="limiter-menu-desktop container">

				<!-- Logo desktop -->
				<h3 style="margin-right: 50px">Book Of Books</h3>

				<!-- Menu desktop -->
				<div class="menu-desktop">
					<ul class="main-menu">
						<li class="active-menu">
							<a href="/">Home</a>
						</li>

						<li>
							<a href="/shop">Shop</a>
						</li>

						<li class="label1" data-label1="hot">
							<a href="/Cart">Features</a>
						</li>

						<li>
							<a href="/blog">Blog</a>
						</li>

						<li>
							<a href="/About">About</a>
						</li>
					</ul>
				</div>

						<!-- Icon header -->
						<div class="wrap-icon-header flex-w flex-r-m" >
							<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-modal-search">
								<i class="zmdi zmdi-search"></i>
							</div>

							<% if(udata!==null){ %>
								<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart"
									data-notify="<%= udata.cart.items.length %>">
									<i class="zmdi zmdi-shopping-cart"></i>
								</div>
		
								<% }else{%>
									<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart"
										data-notify="0">
										<i class="zmdi zmdi-shopping-cart"></i>
									</div>
									<% } %>
						</div>
					</nav>
				</div>
			

			<!-- Header Mobile -->
			<div class="wrap-header-mobile">
				<!-- Logo moblie -->
				<div class="logo-mobile">
					<h3 style="margin-right: 50px">Book Of Books</h3>
				</div>

				<!-- Icon header -->
				<div class="wrap-icon-header flex-w flex-r-m m-r-15">
					<div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 js-show-modal-search">
						<i class="zmdi zmdi-search"></i>
					</div>

					<div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti js-show-cart"
						data-notify="2">
						<i class="zmdi zmdi-shopping-cart"></i>
					</div>

					<a href="#" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-r-11 p-l-10 icon-header-noti"
						data-notify="0">
						<i class="zmdi zmdi-favorite-outline"></i>
					</a>
				</div>

				<!-- Button show menu -->
				<div class="btn-show-menu-mobile hamburger hamburger--squeeze">
					<span class="hamburger-box">
						<span class="hamburger-inner"></span>
					</span>
				</div>
			</div>




			<!-- Modal Search -->
			<div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
				<div class="container-search-header">
					<button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
						<img src="images/icons/icon-close2.png" alt="CLOSE">
					</button>

					<form class="wrap-search-header flex-w p-l-15">
						<button class="flex-c-m trans-04">
							<i class="zmdi zmdi-search"></i>
						</button>
						<input class="plh3" type="text" name="search" placeholder="Search...">
					</form>
				</div>
			</div>
		</header>

				<!-- Cart -->
				<div class="wrap-header-cart js-panel-cart">
					<div class="s-full js-hide-cart"></div>
		
					<div class="header-cart flex-col-l p-l-65 p-r-25">
						<div class="header-cart-title flex-w flex-sb-m p-b-8">
							<span class="mtext-103 cl2">
								Your Cart
							</span>
		
							<div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-cart">
								<i class="zmdi zmdi-close"></i>
							</div>
						</div>
		
						<div class="header-cart-content flex-w js-pscroll">
		
							<% if(udata){ %>
								<%udata.cart.items.forEach((cart)=>{ %>
		
									<ul class="header-cart-wrapitem w-full">
										<li class="header-cart-item flex-w flex-t m-b-12">
											<div class="header-cart-item-img">
												<img src="<%= cart.product_id.image[0]%>" alt="IMG">
											</div>
		
											<div class="header-cart-item-txt p-t-8">
												<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04"
													style="text-size-adjust: 50px">
													<%= cart.product_id.name %>
												</a>
		
												<span class="header-cart-item-info">
													<%= cart.product_id.Price%>
												</span>
		
											</div>
										</li>
									</ul>
		
									<% })%>
										<div class="w-full">
											<%udata.cart.items.forEach((cart)=>{ %>
												<div class="header-cart-total w-full p-tb-40">
													<%= cart.totalPrice%>
												</div>
												<% })%>
													<div class="header-cart-buttons flex-w w-full">
														<a href="/Cart"
															class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-r-8 m-b-10">
															View Cart
														</a>
		
														<a href="/checkout"
															class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-b-10">
															Check Out
														</a>
													</div>
		
													<% }else{ %>
														<div>
															<h4 style="margin-top: 200px; padding-left: 40px">Login to see the
																Cart</h4>
														</div>
		
														<button type="button" style="width: 100%;"
															class="btn btn-primary btn-lg btn-block"><a style="color: #222;"
																href="/login">
																Login
															</a></button>
		
														<% } %>
										</div>
						</div>              	 
						</div>
					</div>
				</div>

		<!-- breadcrumb -->
		<div class="container" style="padding: 80px;">
			<div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
				<a href="/" class="stext-109 cl8 hov-cl1 trans-04">
					Home
					<i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
				</a>

				<span class="stext-109 cl4">
					WishList
				</span>
			</div>
		</div>

        


		
		<form class="bg0 p-t-75 p-b-85">
			<div class="container">
			  <div class="row">
				<div class="col-lg-10 col-xl-7 m-lr-auto m-b-50">
				  <div class="m-l-25 m-r--38 m-lr-0-xl" id="reloaddiv">
					
					  <table class="table-shopping-cart" id="reloaddive">
						<tr class="table_head">
						  <th class="column-1">Product</th>
						  <th class="column-2"></th>
						  <th class="column-3">Name</th>
						  <th class="column-4"></th>
						  <th class="column-4">Price</th>
						  <th class="column-5">REMOVE</th>
						  <th class="column-6">Add ToCart</th>
						</tr>
		  
						<% if (userData?.wishlist) {
						  userData.wishlist.forEach((product) => { %>
							<tr class="table_row">
							  <td class="column-1">
								<div class="how-itemcart1">
								  <img src="<%= product.product.image[0] %>" alt="<%= product.name %>">
								</div>
							  </td>
							  <td class="column-4">
							  </td> 
							  <td class="column-2"><%= product.product.name %></td>
							  <td class="column-4">
							  </td> 
							  <td class="column-3" style="text-align: center;"><%= product.product.Price %></td>
							  <td class="column-5" style="padding-left: 40px;" >
								<button onclick="deletewish('<%= product.product._id %>')" id="return_button"   type="button" class="btn btn-outline-danger">REMOVE</button>
								</td>
                            <td>
								<button onclick="addtocart('<%=product.product._id%>','<%=product.product.price%>')" type="button" class="btn btn-outline-success">AddtoCart</button>
								</td>
							</tr>
						  <% }) } else { %>
							<tr>
							  <td colspan="6">No items found in wishlist</td>
							</tr>
						  <% } %>
						
					  </table>
					</div>
					</div>
					</div>
                  </div>
                  </form>
		
		  

<script>
         function deletewish (proid) {
            Swal.fire({
					title: 'Are you sure?',
					text: "You won't be able to revert this!",
					icon: 'warning',
					showCancelButton: true,
					confirmButtonColor: '#3085d6',
					cancelButtonColor: '#d33',
					confirmButtonText: 'Yes, delete it!'
				    }).then((result) => {
					if (result.isConfirmed){
                    $.ajax({
                   url:"/deletewishlist",
                   data:{
                    product:proid
                   },
                   method:"POST",
                   success:(response)=>{
                    Swal.fire(
					'Deleted!',
					'Your file has been deleted.',
					'success'
					);
					$('#reloaddive').load('/whislist #reloaddive');
                   }
                    })
                    }
                    
                  })
                  }
  function addtocart(id,Price){
  $.ajax({
  url:"/wishtocart",
  data: {
   id:id,
   Price:Price
  },
method:"POST",
success:(response) =>{
 if(response.success){
    Swal.fire({
	position: 'center',
	icon: 'success',
    title: 'Your work has been saved',
	showConfirmButton: false,
	timer: 1500
	}).then(() => {
	$('#reloaddiv').load('/whislist  #reloaddiv')
	})
 }else{
    Swal.fire({
	position: 'center',
	icon: 'warning',
	title: 'Already in your Cart',
	showConfirmButton: false,
	timer: 1500
	})
	}
    }
})
  }

</script>
                                <%- include('../userlayout/footer.ejs')%>      